<main class="container">
  <h1>{{ title }}</h1>

  <form (ngSubmit)="addTodo()" class="add-todo-form">
    <input type="text" id="new-todo-input" [(ngModel)]="newTodoTitle" name="newTodoTitle" placeholder="Digite uma nova tarefa" class="todo-input" [disabled]="isLoading" aria-describedby="error-message" />
    <button type="submit" class="add-button" [disabled]="isLoading || newTodoTitle.trim() === ''">
      Adicionar
    </button>
  </form>

  <section aria-labelledby="todos-heading">
    <h2 id="todos-heading">Tarefas</h2>

    <div *ngIf="isLoading" class="feedback-message" role="status" aria-live="polite">
      Carregando tarefas...
    </div>

    <div *ngIf="errorMessage" class="error-message" role="alert" aria-live="assertive" id="error-message">
      {{ errorMessage }}
    </div>

    <div *ngIf="!isLoading && todos.length === 0 && !errorMessage" class="feedback-message" role="status" aria-live="polite">
      Nenhuma tarefa encontrada.
    </div>

    <ul *ngIf="!isLoading && todos.length > 0" class="todo-list" aria-label="Lista de tarefas pendentes e concluídas">
      <li *ngFor="let todo of todos" class="todo-item">
        <span [id]="'todo-' + todo.id" class="todo-title" [ngClass]="{'completed': todo.completed}">
          {{ todo.title }}

          <!-- Texto que será lido apenas por leitores de tela -->
          <span *ngIf="todo.completed" class="sr-only"> (completada)</span>
        </span>


        <button (click)="removeTodo(todo.id)" class="remove-button" [attr.aria-label]="'Remover a tarefa ' + todo.title">
          Remover
        </button>
      </li>
    </ul>
  </section>
</main>